:root {
  --bg:#ffffff;
  --surface:#f4f6ff;
  --surface2:#eaedfc;
  --border:#d6dcf5;
  --accent:#1952f5;
  --accent-light:#e8eeff;
  --accent2:#ff5e7d;
  --accent3:#00b96b;
  --text:#1a1d30;
  --text-dim:#8892b8;
  --danger:#f03e3e;
  --radius:16px;
  --mobile:480px;
  --shadow:0 4px 18px rgba(25,82,245,.13);
  --shadow-sm:0 1px 6px rgba(25,82,245,.09);
  --font-main:'Pretendard',sans-serif;
  --font-heading:'GmarketSansBold',sans-serif;
  --font-logo:'Bagel Fat One',cursive;
}
*{box-sizing:border-box;margin:0;padding:0;}
button{-webkit-appearance:none;appearance:none;-webkit-tap-highlight-color:transparent;}
body{background:#f1f5f9;color:var(--text);font-family:var(--font-main);min-height:100vh;}

.screen{display:none;min-height:100vh;position:relative;z-index:1;}
.screen.active{display:block;}
.mobile-wrap{max-width:var(--mobile);margin:0 auto;background:var(--bg);min-height:100vh;position:relative;box-shadow:0 25px 50px rgba(0,0,0,.12);}

/* LOADING */
#loadingScreen.active{display:flex;align-items:center;justify-content:center;}
#loadingScreen .mobile-wrap{display:flex;align-items:center;justify-content:center;flex-direction:column;gap:20px;}
.loading-wrap{display:flex;align-items:center;justify-content:center;background:#fff;position:fixed;top:0;left:0;right:0;bottom:0;z-index:999;}
.loading-content{display:flex;flex-direction:column;align-items:center;gap:8px;}
.loading-logo{font-family:var(--font-logo);font-size:44px;letter-spacing:2px;color:var(--accent);}
.loading-sub{font-size:13px;color:var(--text-dim);font-weight:600;letter-spacing:1px;margin-bottom:16px;}
.loading-spinner{width:28px;height:28px;border:3px solid #e8eeff;border-top-color:var(--accent);border-radius:50%;animation:spin .7s linear infinite;}
.loading-msg{font-size:12px;color:var(--text-dim);margin-top:4px;animation:pulse-fade 1.5s ease-in-out infinite;}
@keyframes pulse-fade{0%,100%{opacity:0.5;}50%{opacity:1;}}
@keyframes spin{to{transform:rotate(360deg);}}

/* LOGIN */
#loginScreen.active{display:flex;align-items:center;justify-content:center;min-height:100vh;}
#loginScreen .mobile-wrap{background:transparent;display:flex;flex-direction:column;justify-content:center;min-height:100vh;padding:0;position:relative;z-index:1;overflow:hidden;}
.login-top-bg{position:absolute;top:0;left:0;right:0;height:55%;background:linear-gradient(160deg,#1952f5 0%,#6b8fff 60%,#a78bfa 100%);border-radius:0 0 40px 40px;z-index:0;}
.login-hero{display:flex;flex-direction:column;align-items:center;padding:60px 0 36px;position:relative;z-index:1;}
.login-logo{font-size:72px;display:block;margin-bottom:0;animation:egg-bounce 1.6s ease-in-out infinite;}
@keyframes egg-bounce{0%,100%{transform:translateY(0) rotate(-5deg);}50%{transform:translateY(-12px) rotate(5deg);}}
.login-title{font-family:var(--font-logo);font-size:34px;letter-spacing:2px;color:#fff;text-align:center;margin-bottom:6px;text-shadow:0 2px 12px rgba(25,82,245,.3);}
.login-sub{text-align:center;color:rgba(255,255,255,.75);font-size:13px;letter-spacing:3px;}
.login-bottom-area{position:relative;z-index:1;padding:0 28px 40px;margin-top:auto;}
.login-card{background:#fff;border-radius:28px;padding:32px 28px 28px;box-shadow:0 20px 60px rgba(25,82,245,.18);}
.login-box{width:100%;}
.input-group{margin-bottom:16px;}
.input-group label{display:block;font-size:11px;color:var(--text-dim);margin-bottom:8px;letter-spacing:2px;text-transform:uppercase;font-weight:700;}
.input-group input{width:100%;background:var(--surface2);border:2px solid var(--border);border-radius:12px;padding:14px 16px;color:var(--text);font-size:15px;font-family:var(--font-main);outline:none;transition:border-color .2s,box-shadow .2s;box-shadow:var(--shadow-sm);}
.input-group input:focus{border-color:var(--accent);box-shadow:0 0 0 4px rgba(25,82,245,.10);}
.save-login-row{display:flex;align-items:center;gap:8px;margin-bottom:4px;}
.save-login-row input[type=checkbox]{width:16px;height:16px;accent-color:var(--accent);cursor:pointer;}
.save-login-row label{font-size:12px;color:var(--text-dim);cursor:pointer;}
.btn-primary{width:100%;background:linear-gradient(135deg,#1952f5,#6b8fff);color:#fff;border:none;border-radius:12px;padding:16px;font-size:16px;font-weight:700;font-family:var(--font-main);cursor:pointer;margin-top:8px;transition:transform 0.1s cubic-bezier(0.175,0.885,0.32,1.275),box-shadow .2s;letter-spacing:1px;box-shadow:0 8px 24px rgba(25,82,245,.38);}
.btn-primary:active{transform:scale(0.96);box-shadow:0 4px 12px rgba(25,82,245,.25);}
.btn-primary:hover{opacity:.9;transform:translateY(-1px);}
.btn-primary:disabled{opacity:.5;cursor:not-allowed;transform:none;}
.login-error{color:var(--danger);font-size:13px;text-align:center;margin-top:12px;display:none;}

/* NAV */
.topnav{height:56px;background:#fff;border-bottom:2px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0 20px;position:sticky;top:0;z-index:50;box-shadow:0 2px 10px rgba(25,82,245,.08);}
.nav-logo{font-family:var(--font-logo);font-size:20px;color:var(--accent);letter-spacing:1px;}
.nav-badge{font-size:10px;color:var(--accent2);margin-left:5px;}
.nav-right{display:flex;align-items:center;gap:8px;}
/* 글씨 크기 설정 */
:root{--font-scale:1;}
.mobile-wrap{font-size:calc(14px * var(--font-scale));}
.mobile-wrap .habit-card-title,.mobile-wrap .challenge-card-title{font-size:calc(14px * var(--font-scale));}
.mobile-wrap .habit-card-unit,.mobile-wrap .challenge-card-type,.mobile-wrap .habit-card-streak{font-size:calc(10px * var(--font-scale));}
.mobile-wrap .habit-card-pct,.mobile-wrap .challenge-card-pct{font-size:calc(13px * var(--font-scale));}
.mobile-wrap .section-hdr-title{font-size:calc(16px * var(--font-scale));}
.mobile-wrap .group-header{font-size:calc(13px * var(--font-scale));}
.mobile-wrap .bs-meta-chip{font-size:calc(11px * var(--font-scale));}
.mobile-wrap .filter-pill{font-size:calc(12px * var(--font-scale));}
.mobile-wrap .nav-user{font-size:calc(12px * var(--font-scale));}
.mobile-wrap .tab-btn{font-size:calc(14px * var(--font-scale));}
.mobile-wrap .sub-tab-btn{font-size:calc(14px * var(--font-scale));}
.mobile-wrap .swipe-hint{font-size:calc(11px * var(--font-scale));}
.mobile-wrap .wsb-title{font-size:calc(15px * var(--font-scale));}
.mobile-wrap .wsb-desc{font-size:calc(12px * var(--font-scale));}
.bottomsheet{font-size:calc(14px * var(--font-scale));}
.mobile-wrap .chip-opt{font-size:calc(12px * var(--font-scale));}
.mobile-wrap .proj-edit-input{font-size:calc(14px * var(--font-scale));}
.mobile-wrap .stats-insight-text{font-size:calc(13px * var(--font-scale));}
.mobile-wrap .hamburger-item{font-size:calc(14px * var(--font-scale));}
.font-size-btn{flex:1;padding:10px 0;border-radius:10px;border:2px solid var(--border);background:#fff;color:var(--text-dim);font-weight:800;cursor:pointer;transition:all 0.2s;font-family:var(--font-main);}
.font-size-btn.selected{background:var(--accent-light);border-color:var(--accent);color:var(--accent);}
.font-size-btn:hover{border-color:var(--accent);}
/* 햄버거 메뉴 */
.hamburger-wrap{position:relative;}
.hamburger-btn{background:none;border:none;cursor:pointer;padding:6px;display:flex;flex-direction:column;gap:4px;justify-content:center;}
.hamburger-btn span{display:block;width:20px;height:2.5px;background:#374151;border-radius:2px;transition:all 0.2s;}
.hamburger-btn:hover span{background:var(--accent);}
.hamburger-menu{display:none;position:absolute;right:0;top:calc(100% + 8px);background:#fff;border-radius:14px;box-shadow:0 8px 30px rgba(0,0,0,0.15);min-width:160px;z-index:100;overflow:hidden;border:1px solid #e2e8f0;animation:menuFadeIn 0.15s ease;}
.hamburger-menu.open{display:block;}
@keyframes menuFadeIn{from{opacity:0;transform:translateY(-6px);}to{opacity:1;transform:translateY(0);}}
.hamburger-item{display:flex;align-items:center;gap:8px;width:100%;padding:14px 18px;background:none;border:none;font-size:14px;font-weight:700;color:#374151;cursor:pointer;font-family:var(--font-main);transition:background 0.15s;}
.hamburger-item:hover{background:#f8fafc;}
.hamburger-item:not(:last-child){border-bottom:1px solid #f1f5f9;}
.nav-user{font-size:13px;color:var(--text-dim);font-weight:700;}
.btn-sm{background:#f1f5f9;border:1.5px solid #e2e8f0;color:#6b7280;border-radius:8px;padding:6px 14px;font-size:12px;font-family:var(--font-main);cursor:pointer;transition:transform 0.1s cubic-bezier(0.175,0.885,0.32,1.275),background .2s,border-color .2s;font-weight:600;}
.btn-sm:active{transform:scale(0.96);}
.btn-sm:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-light);}

/* DASHBOARD */
#dashboardScreen .mobile-wrap{display:flex;flex-direction:column;height:100vh;overflow:hidden;padding-bottom:0;}
#dashboardScreen .dash-scroll{flex:1;overflow-y:auto;overflow-x:hidden;padding-bottom:40px;}
.global-bar{padding:18px 0 20px;background:transparent;}
.gb-top{display:flex;align-items:flex-end;justify-content:space-between;margin-bottom:12px;}
.gb-label{font-size:12px;color:#6b7280;font-weight:600;padding-bottom:4px;}
.gb-pct{font-size:28px;font-weight:900;color:#1952f5;line-height:1;font-family:var(--font-heading);letter-spacing:-0.02em;}
.gb-track{width:100%;height:12px;background:#f1f5f9;border-radius:100px;overflow:hidden;}
.gb-fill{height:100%;background:linear-gradient(90deg,#60a5fa,#6366f1,#a78bfa);border-radius:100px;transition:width .9s cubic-bezier(.4,0,.2,1);position:relative;}
.gb-fill::after{content:'';position:absolute;inset:0;background:linear-gradient(180deg,rgba(255,255,255,.25) 0%,transparent 60%);border-radius:100px;}

/* 아바타 */
.avatar-section{padding:0 20px 16px;display:flex;flex-direction:column;align-items:center;gap:2px;border-bottom:none;border-radius:0;transition:background 0.5s ease;position:relative;overflow:hidden;}
.avatar-section::before{content:'';position:absolute;top:0;left:0;right:0;height:24px;background:linear-gradient(180deg,rgba(255,255,255,0.2) 0%,transparent 100%);z-index:2;pointer-events:none;}
.avatar-art{width:180px;height:180px;flex-shrink:0;background:transparent;border:none;overflow:visible;display:flex;align-items:center;justify-content:center;position:relative;z-index:1;margin-top:0px;margin-bottom:-30px;}
.avatar-art canvas{width:180px!important;height:180px!important;}
.avatar-stage{font-size:11px;font-weight:700;color:var(--accent);background:var(--accent-light);padding:3px 10px;border-radius:8px;position:relative;z-index:3;}
.avatar-info-row{display:flex;align-items:center;justify-content:center;gap:8px;position:relative;z-index:3;padding-bottom:8px;}
.avatar-nickname{font-family:var(--font-heading);font-size:22px;color:#111827;letter-spacing:-0.02em;}
.pencil-btn{background:rgba(255,255,255,.15);border:1.5px solid rgba(255,255,255,.25);color:#cbd5e1;border-radius:8px;width:28px;height:28px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:12px;transition:all .2s;flex-shrink:0;}
.pencil-btn:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-light);}
.avatar-section:not(.dark-bg) .pencil-btn{background:rgba(0,0,0,.06);border-color:rgba(0,0,0,.12);color:#6b7280;}
.avatar-nickname-edit{display:none;align-items:center;justify-content:center;gap:8px;position:relative;z-index:3;padding:4px 20px 8px;width:100%;max-width:360px;}
.nickname-input{flex:1;background:rgba(255,255,255,.95);border:2px solid var(--accent);border-radius:12px;padding:10px 14px;color:var(--text);font-size:15px;font-family:var(--font-main);outline:none;text-align:center;min-width:0;}
.nickname-save-btn{background:var(--accent);color:#fff;border:none;border-radius:10px;padding:10px 16px;font-size:13px;font-weight:700;font-family:var(--font-main);cursor:pointer;white-space:nowrap;box-shadow:0 3px 10px rgba(25,82,245,.25);flex-shrink:0;}
.nickname-cancel-btn{background:rgba(255,255,255,.15);color:#e2e8f0;border:1.5px solid rgba(255,255,255,.3);border-radius:10px;padding:10px 12px;font-size:13px;font-weight:700;font-family:var(--font-main);cursor:pointer;white-space:nowrap;flex-shrink:0;}
.avatar-msg{font-size:14px;color:#6b7280;line-height:1.6;text-align:center;max-width:260px;}
/* 시간대별 하늘 장식 */
.sky-deco{position:absolute;pointer-events:none;z-index:1;}
.sky-deco.star{color:rgba(255,255,220,.8);animation:twinkle 2.5s ease-in-out infinite alternate;}
.sky-deco.moon{animation:float 4s ease-in-out infinite alternate;filter:drop-shadow(0 0 8px rgba(255,255,200,.4));z-index:1;}
.sky-deco.cloud{animation:drift 8s ease-in-out infinite alternate;opacity:0.8;}
.sky-deco.sun-rise{animation:float 3s ease-in-out infinite alternate;filter:drop-shadow(0 0 20px rgba(255,200,50,.5));}
@keyframes twinkle{0%{opacity:0.3;transform:scale(0.8);}100%{opacity:1;transform:scale(1.2);}}
@keyframes float{0%{transform:translateX(-50%) translateY(0);}100%{transform:translateX(-50%) translateY(-6px);}}
@keyframes drift{0%{transform:translateX(0);}100%{transform:translateX(12px);}}

/* 목표 섹션 */
.goals-section{padding:20px 20px 0;}
.goals-section-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;margin-top:20px;}
.goals-section-title{font-size:14px;font-weight:700;color:#374151;letter-spacing:.5px;}

/* 토글 필터 */
.goal-filter-toggle{display:flex;background:#f1f5f9;border-radius:10px;padding:3px;gap:2px;}
.goal-filter-btn{padding:6px 14px;border:none;border-radius:8px;font-size:12px;font-weight:700;font-family:var(--font-main);cursor:pointer;color:#9ca3af;background:transparent;transition:all .2s;}
.goal-filter-btn.active{background:#fff;color:var(--accent);box-shadow:0 1px 4px rgba(0,0,0,.08);}

/* 습관/도전 서브탭 */
.sub-tab-bar{display:flex;background:#f1f5f9;border-radius:14px;padding:4px;margin:8px 20px 0;gap:4px;position:sticky;top:0;z-index:30;box-shadow:0 2px 6px rgba(0,0,0,0.04);}
.sub-tab-bar::before{content:'';position:absolute;top:-8px;left:-20px;right:-20px;bottom:-6px;background:#fff;z-index:-1;}
.sub-tab-btn{flex:1;padding:12px 0;border:none;border-radius:11px;font-size:14px;font-weight:700;font-family:var(--font-main);cursor:pointer;color:#9ca3af;background:transparent;transition:all .2s;}
.sub-tab-btn.active{background:#fff;color:var(--text);box-shadow:0 2px 10px rgba(0,0,0,.1);}
.sub-tab-panel{display:none;}
.sub-tab-panel.active{display:block;}

/* 섹션 헤더 (나의 습관 3 / 모든 목표 토글) */
.section-hdr{display:flex;align-items:center;justify-content:space-between;padding:0 20px;margin:20px 0 14px;}
.section-hdr-left{display:flex;align-items:center;gap:8px;}
.section-hdr-title{font-size:16px;font-weight:800;color:#111827;}
.section-hdr-count{font-family:var(--font-heading);letter-spacing:-0.02em;font-size:16px;color:var(--accent);}
.filter-pill{display:flex;align-items:center;gap:6px;background:#fff;border:1.5px solid var(--border);border-radius:100px;padding:6px 14px;cursor:pointer;font-size:12px;font-weight:700;color:var(--text-dim);font-family:var(--font-main);transition:all .2s;}
.filter-pill .filter-dot{width:8px;height:8px;border-radius:50%;background:#d1d5db;transition:background .2s;}
.filter-pill.active-filter{border-color:var(--accent);color:var(--accent);}
.filter-pill.active-filter .filter-dot{background:var(--accent);}

/* 2열 그리드 카드 */
.card-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:0 20px;overflow:hidden;}

/* 습관 카드 (스와이프) */
.habit-card-outer{position:relative;overflow:hidden;border-radius:18px;}
.habit-card-swipe-bg-left{position:absolute;top:0;left:0;bottom:0;width:100%;display:none;align-items:center;justify-content:flex-start;padding-left:18px;border-radius:16px;background:#93b4f8;}
.habit-card-swipe-bg-right{position:absolute;top:0;right:0;bottom:0;width:100%;display:none;align-items:center;justify-content:flex-end;padding-right:18px;border-radius:16px;background:#f8a4b8;}
.habit-card-outer.swiping-right .habit-card-swipe-bg-left{display:flex;}
.habit-card-outer.swiping-left .habit-card-swipe-bg-right{display:flex;}
.swipe-bg-text{color:#fff;font-size:11px;font-weight:800;letter-spacing:1px;opacity:.9;}
/* 미완료 카드 - 파란 그라데이션 + 흰색 텍스트 */
.habit-card{position:relative;z-index:2;background:linear-gradient(135deg,var(--accent) 0%,#527cff 100%);border:none;border-radius:16px;padding:12px 14px;cursor:pointer;transition:transform 0.1s cubic-bezier(0.175,0.885,0.32,1.275),box-shadow .2s;touch-action:pan-y;user-select:none;box-shadow:0 6px 16px rgba(25,82,245,0.25);min-height:100px;display:flex;flex-direction:column;justify-content:space-between;}
.habit-card:active:not(.swiping){transform:scale(0.97);box-shadow:0 4px 10px rgba(25,82,245,0.2);}
.habit-card:active{box-shadow:0 4px 10px rgba(25,82,245,0.4);transform:scale(0.96);}
.habit-card.swiping{transition:none;}
.habit-card.snapping{transition:transform .3s cubic-bezier(.15,.9,.3,1);}
/* 카드 등장 애니메이션 */
@keyframes cardEntrance{0%{opacity:0;transform:translateY(20px);}100%{opacity:1;transform:translateY(0);}}
.habit-card-outer{animation:cardEntrance 0.35s cubic-bezier(0.175,0.885,0.32,1.275) both;}
.challenge-card{animation:cardEntrance 0.35s cubic-bezier(0.175,0.885,0.32,1.275) both;}
.habit-card-title{font-size:14px;font-weight:800;color:#fff;margin-bottom:6px;line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;}
.habit-card-mid{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px;}
.habit-card-unit{font-size:10px;color:#fff;font-weight:700;background:rgba(255,255,255,0.25);padding:3px 7px;border-radius:6px;}
.habit-card-streak{display:flex;align-items:center;gap:4px;}
.habit-card-streak .fire{font-size:13px;line-height:1;}
.habit-card-streak .streak-num{font-size:12px;font-weight:800;color:#fff;}
.habit-card-streak.zero .fire{opacity:.4;filter:grayscale(100%);}
.habit-card-streak.zero .streak-num{color:rgba(255,255,255,0.6);}
.habit-card-bot{display:flex;align-items:center;gap:6px;}
.habit-card-bar{flex:1;height:6px;background:rgba(255,255,255,0.25);border-radius:100px;overflow:hidden;}
.habit-card-bar-fill{height:100%;border-radius:100px;background:#fff;transition:width .6s cubic-bezier(.4,0,.2,1);}
.habit-card-bar-fill.over100{background:#f5c518;box-shadow:0 0 8px rgba(245,197,24,0.5);}
.habit-card-pct{font-size:13px;font-weight:900;color:#fff;min-width:32px;text-align:right;}
/* 완료 카드 - 민트/화이트 톤 */
.habit-card.today-done{background:#fdfdfd;border:1px solid #d1fae5;box-shadow:none;}
.habit-card.today-done .habit-card-title{color:#94a3b8;}
.habit-card.today-done .habit-card-unit{background:#ecfdf5;color:#10b981;}
.habit-card.today-done .habit-card-pct{color:#34d399;}
.habit-card.today-done .habit-card-bar{background:#f8fafc;}
.habit-card.today-done .habit-card-bar-fill{background:#6ee7b7;box-shadow:none;}
.habit-card.today-done .habit-card-streak .streak-num{color:#94a3b8;}
.habit-card.today-done .habit-card-streak{opacity:.5;}
/* 완료 뱃지 */
.habit-card-done-badge{position:absolute;top:10px;right:10px;width:22px;height:22px;border-radius:50%;background:#10b981;color:#fff;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:900;box-shadow:0 2px 6px rgba(16,185,129,0.25);}
/* completed 상태 (once 등) */
.habit-card.completed{background:#fdfdfd;border:1px solid #d1fae5;box-shadow:none;}
.habit-card.completed .habit-card-title{color:#94a3b8;}
.habit-card.completed .habit-card-unit{background:#ecfdf5;color:#10b981;}
.habit-card.completed .habit-card-mid{opacity:.5;}
.habit-card.completed .habit-card-bot{opacity:.5;}

/* 도전 카드 - 파란 그라데이션 기본 */
.challenge-card{position:relative;z-index:2;background:linear-gradient(135deg,var(--accent) 0%,#527cff 100%);border:none;border-radius:16px;padding:12px 14px;cursor:pointer;box-shadow:0 6px 16px rgba(25,82,245,0.25);min-height:100px;display:flex;flex-direction:column;justify-content:space-between;transition:transform 0.1s cubic-bezier(0.175,0.885,0.32,1.275),box-shadow .2s;touch-action:pan-y;user-select:none;}
.challenge-card:active:not(.swiping){transform:scale(0.97);box-shadow:0 4px 10px rgba(25,82,245,0.2);}
.challenge-card:active{box-shadow:0 4px 10px rgba(25,82,245,0.4);transform:scale(0.96);}
.challenge-card.type-bucket{border:none;}
.challenge-card.type-project{border:none;}
.challenge-card-title{font-size:14px;font-weight:800;color:#fff;margin-bottom:4px;line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;}
.challenge-card-meta-row{display:flex;align-items:center;gap:6px;margin-bottom:4px;}
.challenge-card-type{font-size:10px;font-weight:700;border-radius:6px;padding:2px 7px;display:inline-block;}
.challenge-card-stage{font-size:11px;font-weight:700;color:rgba(255,255,255,0.75);}
.challenge-card-type.bucket{background:rgba(255,255,255,0.25);color:#fff;border:none;}
.challenge-card-type.project{background:rgba(255,255,255,0.25);color:#fff;border:none;}
.challenge-card-progress{font-family:var(--font-heading);letter-spacing:-0.02em;font-size:13px;color:rgba(255,255,255,0.8);}
.challenge-card-bar{height:6px;background:rgba(255,255,255,0.25);border-radius:100px;overflow:hidden;margin-top:2px;}
.challenge-card-bar-fill{height:100%;border-radius:100px;transition:width .6s cubic-bezier(.4,0,.2,1);}
.challenge-card-bar-fill.bucket{background:#fff;}
.challenge-card-bar-fill.project{background:#fff;}
.challenge-card-pct{font-size:13px;font-weight:900;min-width:32px;text-align:right;}
.challenge-card-pct.bucket{color:#fff;}
.challenge-card-pct.project{color:#fff;}
/* 버킷리스트 완료 - 민트/화이트 */
.challenge-card.bucket-done{background:#fdfdfd;border:1px solid #d1fae5;box-shadow:none;opacity:1;}
.challenge-card.bucket-done .challenge-card-title{text-decoration:none;color:#94a3b8;}
.challenge-card.bucket-done .challenge-card-type.bucket{background:#ecfdf5;color:#10b981;}
.challenge-card-done-badge{position:absolute;top:14px;right:14px;width:24px;height:24px;border-radius:50%;background:#10b981;color:#fff;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:900;box-shadow:0 2px 6px rgba(16,185,129,0.25);}
.challenge-card-sparkle{display:none;}
.challenge-card-achieve{font-size:12px;color:#34d399;font-weight:700;margin-top:4px;}
/* 프로젝트 완료 */
.challenge-card.project-done{background:#fdfdfd;border:1px solid #d1fae5;box-shadow:none;}
.challenge-card.project-done .challenge-card-title{color:#94a3b8;}
.challenge-card.project-done .challenge-card-type.project{background:#ecfdf5;color:#10b981;}
.challenge-card.project-done .challenge-card-stage{color:#94a3b8;}
.challenge-card.project-done .challenge-card-progress{color:#94a3b8;}
.challenge-card.project-done .challenge-card-bar{background:#f8fafc;}
.challenge-card.project-done .challenge-card-bar-fill.project{background:#6ee7b7;}
.challenge-card.project-done .challenge-card-pct.project{color:#34d399;}
/* 도전 카드 스와이프 (버킷리스트) */
.challenge-card-outer{position:relative;overflow:hidden;border-radius:18px;}
.challenge-swipe-bg{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;display:flex;align-items:center;border-radius:16px;z-index:0;}
.challenge-swipe-bg.todo{background:#93b4f8;justify-content:flex-start;padding-left:18px;}
.challenge-swipe-bg.done{background:#f8a4b8;justify-content:flex-end;padding-right:18px;}
.challenge-card-outer:has(.bucket-done) .challenge-swipe-bg{display:none;}
.challenge-card.swiping{transition:none;position:relative;z-index:2;}
.challenge-card.snapping{transition:transform .3s cubic-bezier(.15,.9,.3,1);position:relative;z-index:2;}

/* 카드 추가 버튼 (그리드 내) */
.grid-add-btn{background:#f8fafc;border:2px dashed #cbd5e1;border-radius:16px;min-height:100px;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#94a3b8;cursor:pointer;transition:transform 0.1s cubic-bezier(0.175,0.885,0.32,1.275),background .2s;}
.grid-add-btn:active{transform:scale(0.96);}
.grid-add-btn:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-light);}
.grid-add-btn-icon{font-size:20px;margin-bottom:2px;}
.grid-add-btn-text{font-size:12px;font-weight:700;}

/* 뷰 모드 셀렉트 */
.view-mode-select{background:#f1f5f9;border:1.5px solid #e2e8f0;border-radius:100px;padding:6px 10px;font-size:12px;font-weight:700;color:#4b5563;outline:none;cursor:pointer;font-family:var(--font-main);margin-right:6px;}
.view-mode-select:focus{border-color:var(--accent);}
/* 아코디언 그룹 헤더 */
.group-header{display:flex;align-items:center;justify-content:space-between;font-size:13px;font-weight:800;color:#64748b;margin:18px 0 8px 0;padding:0 20px 10px 20px;border-bottom:1.5px solid #e8edf2;cursor:pointer;user-select:none;transition:color 0.2s;line-height:1.3;}
.group-header:hover{color:var(--accent);}
.group-header-left{display:flex;align-items:center;gap:6px;min-width:0;line-height:1.3;}
.group-header-emoji{font-size:15px;line-height:1;flex-shrink:0;width:20px;text-align:center;}
.group-toggle-icon{font-size:12px;color:#9ca3af;transition:transform 0.3s cubic-bezier(0.4,0,0.2,1);flex-shrink:0;}
.group-toggle-icon.closed{transform:rotate(-90deg);}
.card-grid.hidden{display:none;}
/* 칩 UI */
.chip-group{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:8px;}
.chip-opt{background:#fff;border:1.5px solid var(--border);border-radius:8px;padding:6px 12px;font-size:12px;font-weight:700;color:var(--text-dim);cursor:pointer;transition:all 0.2s;user-select:none;}
.chip-opt:hover{border-color:var(--accent);color:var(--accent);}
.chip-opt.selected{background:var(--accent-light);border-color:var(--accent);color:var(--accent);}

.swipe-hint{text-align:center;color:var(--text-dim);font-size:12px;margin-top:8px;opacity:.6;padding:0 20px;}

/* 프로젝트 바텀시트 상세 */
.proj-why-box{background:linear-gradient(135deg,var(--accent-light),#f8faff);border:2px solid rgba(25,82,245,.15);border-radius:14px;padding:16px;margin-bottom:18px;}
.proj-why-label{font-size:10px;font-weight:700;color:var(--accent);border:1.5px solid rgba(25,82,245,.2);border-radius:6px;padding:2px 8px;display:inline-block;margin-bottom:8px;}
.proj-why-text{font-size:14px;color:var(--text);line-height:1.6;}
.proj-stage{margin-bottom:16px;}
.proj-stage-hdr{display:flex;align-items:center;gap:10px;margin-bottom:10px;}
.proj-stage-num{width:28px;height:28px;border-radius:50%;background:var(--accent);color:#fff;font-family:var(--font-heading);letter-spacing:-0.02em;font-size:13px;display:flex;align-items:center;justify-content:center;flex-shrink:0;}
.proj-stage-num.done{background:var(--accent3);}
.proj-stage-title{font-size:15px;font-weight:800;color:#111827;flex:1;}
.proj-task-list{padding-left:38px;display:flex;flex-direction:column;gap:8px;}
.proj-task{display:flex;align-items:center;gap:10px;background:#fff;border:1.5px solid var(--border);border-radius:10px;padding:11px 14px;cursor:pointer;transition:all .15s;}
.proj-task:active{transform:scale(.98);}
.proj-task.task-done{background:#f0fdf4;border-color:rgba(0,185,107,.3);}
.proj-task-text{flex:1;font-size:13px;color:var(--text);font-weight:600;}
.proj-task.task-done .proj-task-text{text-decoration:line-through;color:#9ca3af;}
.proj-task-check{width:22px;height:22px;border-radius:50%;border:2px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:12px;color:transparent;flex-shrink:0;transition:all .2s;}
.proj-task.task-done .proj-task-check{background:var(--accent3);border-color:var(--accent3);color:#fff;}
.proj-edit-btn{width:100%;background:#fff;border:2px solid var(--border);border-radius:12px;padding:13px;font-size:14px;font-weight:700;font-family:var(--font-main);cursor:pointer;color:var(--text-dim);transition:all .2s;margin-top:16px;}
.proj-edit-btn:hover{border-color:var(--accent);color:var(--accent);}

/* 프로젝트 편집 모드 */
.proj-edit-input{width:100%;background:var(--surface2);border:2px solid var(--border);border-radius:10px;padding:11px 13px;color:var(--text);font-size:14px;font-family:var(--font-main);outline:none;margin-bottom:10px;transition:border-color .2s;}
.proj-edit-input:focus{border-color:var(--accent);}
.proj-edit-textarea{resize:vertical;min-height:60px;}
.proj-edit-stage-box{background:var(--surface);border:2px solid var(--border);border-radius:12px;padding:14px;margin-bottom:12px;}
.proj-edit-task-row{display:flex;align-items:center;gap:6px;margin-bottom:8px;}
.task-check-label{display:flex;align-items:center;cursor:pointer;flex-shrink:0;}
.task-check{display:none;}
.task-check-mark{width:20px;height:20px;border-radius:6px;border:2px solid var(--border);background:#fff;display:flex;align-items:center;justify-content:center;transition:all .2s;font-size:11px;}
.task-check:checked + .task-check-mark{background:var(--accent3);border-color:var(--accent3);color:#fff;}
.task-check:checked + .task-check-mark::after{content:'✓';font-weight:900;}
.proj-edit-task-input{flex:1;min-width:0;background:#fff;border:1.5px solid var(--border);border-radius:8px;padding:9px 11px;font-size:13px;font-family:var(--font-main);color:var(--text);outline:none;}
.proj-edit-task-input:focus{border-color:var(--accent);}
.proj-edit-task-del{background:none;border:none;color:var(--text-dim);font-size:14px;cursor:pointer;padding:2px;line-height:1;flex-shrink:0;width:22px;text-align:center;}
.proj-edit-task-del:hover{color:var(--danger);}
.proj-add-task-btn{background:transparent;border:1.5px dashed var(--border);border-radius:8px;padding:8px;text-align:center;font-size:12px;color:var(--text-dim);cursor:pointer;font-family:var(--font-main);font-weight:700;width:100%;transition:all .2s;}
.proj-add-task-btn:hover{border-color:var(--accent);color:var(--accent);}
.proj-add-stage-btn{background:var(--surface);border:2px dashed var(--border);border-radius:12px;padding:12px;text-align:center;font-size:13px;color:var(--text-dim);cursor:pointer;font-family:var(--font-main);font-weight:700;width:100%;margin-bottom:16px;transition:all .2s;}
.proj-add-stage-btn:hover{border-color:var(--accent);color:var(--accent);}
.proj-save-row{display:flex;gap:8px;margin-top:16px;}
.proj-save-btn{flex:1;padding:13px;border:none;border-radius:12px;font-size:14px;font-weight:700;font-family:var(--font-main);cursor:pointer;}
.proj-save-btn.cancel{background:#f1f5f9;color:#6b7280;border:2px solid var(--border);}
.proj-save-btn.save{background:var(--accent);color:#fff;box-shadow:0 4px 12px rgba(25,82,245,.28);}

/* 도전 추가 바텀시트 타입 선택 */
.challenge-type-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:20px;}
.challenge-type-card{background:#fff;border:2px solid var(--border);border-radius:14px;padding:20px 12px;cursor:pointer;text-align:center;transition:all .2s;}
.challenge-type-card:hover{border-color:var(--accent);background:var(--accent-light);}
.challenge-type-card.selected{border-color:var(--accent);background:var(--accent-light);box-shadow:0 0 0 3px rgba(25,82,245,.12);}
.challenge-type-icon{font-size:28px;margin-bottom:8px;display:block;}
.challenge-type-name{font-size:14px;font-weight:800;color:var(--text);margin-bottom:4px;}
.challenge-type-desc{font-size:11px;color:var(--text-dim);line-height:1.4;}

/* 바텀시트 */
.bottomsheet-overlay{position:fixed;inset:0;background:rgba(0,0,0,.4);z-index:900;opacity:0;pointer-events:none;transition:opacity .3s;}
.bottomsheet-overlay.open{opacity:1;pointer-events:auto;}
.bottomsheet{position:fixed;bottom:0;left:50%;transform:translateX(-50%) translateY(100%);width:100%;max-width:480px;max-height:95vh;background:#fff;border-radius:24px 24px 0 0;z-index:901;transition:transform .35s cubic-bezier(.4,0,.2,1);overflow:hidden;display:flex;flex-direction:column;}
.bottomsheet.open{transform:translateX(-50%) translateY(0);}
.bs-handle{display:flex;justify-content:center;padding:12px 0 4px;flex-shrink:0;}
.bs-handle-bar{width:40px;height:4px;background:#d1d5db;border-radius:2px;}
.bs-header{padding:8px 20px 14px;border-bottom:2px solid var(--border);display:flex;align-items:center;justify-content:space-between;flex-shrink:0;}
.bs-title{font-family:var(--font-heading);font-size:18px;letter-spacing:-0.02em;color:var(--text);}
.bs-meta-tags{display:flex;flex-wrap:wrap;gap:5px;margin-top:6px;}
.bs-meta-tags:empty{display:none;}
.bs-meta-chip{display:inline-flex;align-items:center;gap:2px;padding:3px 9px;border-radius:6px;font-size:11px;font-weight:700;background:#f1f5f9;color:#64748b;border:1px solid #e2e8f0;line-height:1.3;}
.bs-meta-chip.accent{background:var(--accent);color:#fff;border-color:var(--accent);}
.bs-close{background:none;border:none;font-size:22px;cursor:pointer;color:var(--text-dim);padding:4px 8px;border-radius:8px;line-height:1;}
.bs-close:hover{background:var(--surface2);}
.bs-body{flex:1;overflow-y:auto;padding:20px;padding-bottom:40px;}

/* 달력 */
.month-nav{display:flex;align-items:center;gap:10px;margin-bottom:14px;}
.month-nav-btn{background:#fff;border:1.5px solid #e2e8f0;color:#6b7280;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;font-size:16px;cursor:pointer;font-weight:700;transition:all .2s;}
.month-nav-btn:hover{border-color:var(--accent);color:var(--accent);}
.month-nav-btn:disabled{opacity:.3;cursor:default;}
.month-label{font-size:15px;font-weight:700;color:#1f2937;}
.cal-day-row{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin-bottom:4px;}
.cal-day-lbl{text-align:center;font-size:11px;color:#9ca3af;padding:6px 0;font-weight:700;}
.cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;}
.cal-cell{aspect-ratio:1;background:#f8fafc;border:1.5px solid #e2e8f0;border-radius:14px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all .15s;user-select:none;}
.cal-cell:active{transform:scale(.93);}
.cal-cell.empty{background:transparent;border-color:transparent;cursor:default;}
.cal-cell.locked{opacity:.4;cursor:not-allowed;}
.cal-cell.done{background:#dbeafe;border-color:#93c5fd;}
.cal-cell.done .cal-dn{color:#3b82f6;}
.cal-cell.done .cal-chk{opacity:1;color:#2563eb;font-size:16px;font-weight:900;line-height:1;}
.cal-cell.week-ok{background:rgba(25,82,245,.07);border-color:rgba(25,82,245,.25);}
.cal-today{border-color:#60a5fa!important;box-shadow:0 0 0 4px rgba(96,165,250,.15)!important;}
.cal-today .cal-dn{color:var(--accent);}
.cal-dn{font-size:12px;font-weight:600;color:#4b5563;}
.cal-chk{font-size:10px;opacity:0;}
.bs-cal-meta{display:flex;align-items:center;gap:8px;margin-bottom:14px;}
.bs-cal-unit{background:var(--accent-light);border:2px solid rgba(25,82,245,.2);border-radius:100px;padding:5px 13px;font-size:12px;color:var(--accent);font-weight:700;}
.bs-edit-btn{background:var(--accent);color:#fff;border:none;border-radius:10px;padding:7px 16px;font-size:12px;font-weight:700;font-family:var(--font-main);cursor:pointer;box-shadow:0 2px 8px rgba(25,82,245,.22);}

/* 통계 */
.stats-section{margin-top:20px;padding-top:20px;border-top:2px solid var(--border);}
.stats-title{font-weight:700;font-size:15px;color:#1f2937;margin-bottom:16px;display:flex;align-items:center;gap:8px;}
.stats-chart{display:flex;align-items:flex-end;gap:8px;height:176px;position:relative;padding:0 8px;margin-top:16px;}
.stats-avg-line{position:absolute;left:0;right:0;border-top:2px dashed var(--accent);opacity:.35;pointer-events:none;}
.stats-bar-wrap{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;height:100%;justify-content:flex-end;}
.stats-bar-col{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;height:160px;position:relative;}
.stats-bar{width:100%;max-width:32px;border-radius:4px 4px 0 0;background:#e2e8f0;transition:height .5s ease;min-height:4px;position:relative;}
.stats-bar.current-month{background:linear-gradient(180deg,#a78bfa,#1952f5);box-shadow:0 4px 14px rgba(167,139,250,.45);}
.stats-bar.past{background:#bfdbfe;}
.stats-bar-pct{font-size:9px;color:transparent;position:absolute;top:-14px;left:50%;transform:translateX(-50%);white-space:nowrap;font-weight:700;transition:color .15s;}
.stats-bar-wrap:hover .stats-bar-pct{color:#7c3aed;}
.stats-bar.current-month .stats-bar-pct{color:#7c3aed;font-weight:800;}
.stats-bar-lbl{font-size:10px;color:#4b5563;margin-top:6px;white-space:nowrap;font-weight:700;}
.stats-bar-lbl.current{color:#7c3aed;font-weight:800;}
.stats-insight{background:#f8fafc;border-radius:18px;padding:16px;margin-top:12px;}
.stats-insight-row{display:flex;align-items:flex-start;gap:12px;margin-bottom:12px;}
.stats-insight-row:last-child{margin-bottom:0;}
.stats-insight-icon{font-size:16px;flex-shrink:0;margin-top:1px;}
.stats-insight-text{font-size:13px;color:#374151;line-height:1.7;}
.stats-insight-text strong{color:#1f2937;}
.stats-cheer{background:linear-gradient(135deg,var(--accent-light),#fff0f3);border:2px solid rgba(25,82,245,.15);border-radius:14px;padding:14px 16px;margin-top:10px;font-size:13px;color:var(--text);line-height:1.7;}
.stats-cheer strong{color:var(--accent2);}

/* 주간 현황 */
.week-status-banner{background:#f8fafc;border:1px solid #e2e8f0;border-radius:16px;padding:16px 20px;margin-bottom:20px;display:flex;align-items:center;justify-content:space-between;transition:all 0.3s;}
.week-status-banner.success{background:linear-gradient(135deg,#ecfdf5,#d1fae5);border-color:#a7f3d0;box-shadow:0 4px 12px rgba(16,185,129,0.12);}
.wsb-title{font-size:15px;font-weight:800;margin-bottom:4px;color:#334155;display:flex;align-items:center;}
.wsb-badge{padding:4px 8px;border-radius:6px;font-size:11px;font-weight:800;color:#fff;margin-right:8px;line-height:1;letter-spacing:0.5px;}
.wsb-desc{font-size:12px;font-weight:700;color:#64748b;}
.week-status-banner.success .wsb-title{color:#065f46;}
.week-status-banner.success .wsb-desc{color:#059669;}
.wsb-icon{font-size:32px;line-height:1;margin-left:12px;}
.cal-cell.week-cleared:not(.done){background:#f0fdf4;border-color:#d1fae5;}
.cal-cell.week-cleared:not(.done) .cal-dn{color:#10b981;}
.week-info-card{background:var(--surface);border:1.5px solid var(--border);border-radius:10px;padding:7px 12px;margin-top:8px;display:flex;align-items:center;gap:8px;}
.week-info-icon{font-size:15px;flex-shrink:0;}
.week-info-body{flex:1;display:flex;align-items:center;gap:5px;flex-wrap:wrap;}
.week-info-main{font-family:var(--font-heading);letter-spacing:-0.02em;font-size:13px;color:var(--accent);}
.week-info-cheer{font-size:12px;color:var(--text-dim);}
.week-info-clear{background:linear-gradient(135deg,#e8fff4,#e8eeff);border-color:rgba(0,185,107,.3);}
.week-info-clear .week-info-main{background:linear-gradient(90deg,#00b96b,#1952f5);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}

/* 코멘트 - 메인 하단 */
.my-cheers-main{padding:0 20px 20px;}
.my-cheers-main-title{font-size:14px;font-weight:700;color:#374151;margin-bottom:12px;display:flex;align-items:center;gap:6px;}
.my-cheer-card{background:#fff;border:2px solid var(--border);border-radius:14px;padding:13px 16px;box-shadow:var(--shadow-sm);margin-bottom:8px;}
.my-cheer-goal-tag{font-size:10px;letter-spacing:1px;color:var(--accent);font-weight:700;margin-bottom:4px;}
.my-cheer-from{font-size:13px;font-weight:700;color:var(--text);margin-bottom:2px;}
.my-cheer-text{font-size:14px;color:var(--text);line-height:1.5;}
.my-cheer-time{font-size:11px;color:var(--text-dim);margin-top:4px;}
.my-cheers-empty{text-align:center;padding:24px;color:var(--text-dim);font-size:13px;background:var(--surface);border-radius:14px;border:2px dashed var(--border);}

/* 단위 설정 */
.unit-opts{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:20px;}
.unit-opt{background:#fff;border:2px solid var(--border);border-radius:10px;padding:12px 8px;cursor:pointer;text-align:center;font-size:13px;font-weight:700;transition:all .2s;font-family:var(--font-main);color:var(--text);display:flex;align-items:center;justify-content:center;min-height:44px;box-sizing:border-box;}
.unit-opt:hover{border-color:var(--accent);background:var(--accent-light);}
.unit-opt.selected{border-color:var(--accent);background:var(--accent-light);color:var(--accent);}
.unit-confirm-btn{width:100%;background:var(--accent);color:#fff;border:none;border-radius:10px;padding:13px;font-size:14px;font-weight:700;font-family:var(--font-main);cursor:pointer;box-shadow:0 4px 12px rgba(25,82,245,.28);transition:transform 0.1s cubic-bezier(0.175,0.885,0.32,1.275);}
.unit-confirm-btn:active{transform:scale(0.96);}
.add-goal-input{width:100%;background:var(--surface2);border:2px solid var(--border);border-radius:10px;padding:11px 13px;color:var(--text);font-size:14px;font-family:var(--font-main);outline:none;margin-bottom:14px;transition:border-color .2s;}
.add-goal-input:focus{border-color:var(--accent);}

/* TABS */
.tab-bar{display:flex;padding:0 20px;border-bottom:1px solid #f1f5f9;background:#fff;position:sticky;top:0;z-index:40;box-shadow:0 2px 8px rgba(0,0,0,.04);}
.tab-btn{flex:1;padding:14px 0 12px;font-size:14px;font-weight:700;font-family:var(--font-main);background:transparent;border:none;color:#9ca3af;cursor:pointer;border-bottom:2px solid transparent;transition:color .15s,border-color .15s;margin-bottom:-1px;}
.tab-btn.active{color:var(--accent);border-bottom-color:var(--accent);}
.tab-panel{display:none;}
.tab-panel.active{display:block;}

/* FRIENDS */
.friends-section{padding:20px;}
.friends-empty{text-align:center;color:var(--text-dim);font-size:13px;padding:60px 20px;line-height:2.2;}
.friend-list{display:flex;flex-direction:column;gap:10px;}
.friend-card{background:#fff;border:2px solid var(--border);border-radius:var(--radius);padding:14px 16px;display:flex;align-items:center;gap:14px;cursor:pointer;transition:all .2s;box-shadow:var(--shadow-sm);}
.friend-card:hover,.friend-card.active{border-color:var(--accent);background:var(--accent-light);}
.friend-avatar{width:44px;height:44px;background:var(--surface);border:2px solid var(--border);border-radius:12px;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0;font-size:26px;line-height:1;}
.friend-avatar svg{width:38px;height:38px;}
.friend-info{flex:1;min-width:0;}
.friend-name{font-weight:700;font-size:14px;margin-bottom:3px;color:var(--text);}
.friend-stage{font-size:11px;color:var(--text-dim);}
.friend-pct{font-family:var(--font-heading);letter-spacing:-0.02em;font-size:20px;color:var(--accent);flex-shrink:0;}
.friend-detail{border:2px solid var(--border);border-radius:var(--radius);padding:16px;margin-top:8px;background:#fff;}
.friend-detail-hdr{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;}
.friend-detail-name{font-family:var(--font-heading);font-size:15px;letter-spacing:-0.02em;color:var(--text);}
.fgoal-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:14px;}
.fgoal-btn{background:#fff;border:2px solid var(--border);border-radius:12px;padding:11px 10px;cursor:pointer;text-align:left;transition:all .15s;height:72px;display:flex;flex-direction:column;justify-content:center;box-shadow:var(--shadow-sm);position:relative;overflow:hidden;}
.fgoal-btn.fg-active{border-color:#10b981;background:#f0fdf4;}
.fgoal-btn.fgoal-today-done{border-left:3.5px solid #10b981;}
.fgoal-btn.fgoal-today-done::after{content:'✓';position:absolute;top:6px;right:6px;width:18px;height:18px;border-radius:50%;background:#10b981;color:#fff;font-size:10px;font-weight:800;display:flex;align-items:center;justify-content:center;}
.fgoal-btn.fgoal-today-done.fg-active{border-color:#10b981;background:#d1fae5;}
.fgoal-name{font-size:11px;font-weight:700;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--text);}
.fgoal-pct{font-family:var(--font-heading);letter-spacing:-0.02em;font-size:16px;color:var(--accent);}
.fgoal-bar{height:3px;background:var(--surface2);border-radius:2px;overflow:hidden;margin-top:4px;}
.fgoal-bar-fill{height:100%;background:var(--accent);border-radius:2px;}
.rocal-wrap{background:#fff;border:1.5px solid var(--border);border-radius:12px;padding:12px;margin-bottom:14px;}
.rocal-label{font-size:10px;letter-spacing:1.5px;color:var(--text-dim);text-transform:uppercase;margin-bottom:8px;font-weight:700;}
.rocal-days{display:grid;grid-template-columns:repeat(7,1fr);gap:2px;margin-bottom:2px;}
.rocal-day{text-align:center;font-size:9px;color:var(--text-dim);padding:2px 0;font-weight:700;}
.rocal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:2px;}
.rocal-cell{aspect-ratio:1;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:10px;background:transparent;border:1.5px solid transparent;color:var(--text-dim);font-weight:600;}
.rocal-cell.done{background:#d1fae5;border-color:#6ee7b7;color:#065f46;font-weight:800;}
.rocal-cell.empty{background:transparent;border-color:transparent;}
.rocal-cell.today{border-color:#10b981;color:#10b981;font-weight:800;}
.cheer-box{border-top:2px solid var(--border);padding-top:14px;padding-bottom:20px;}
.cheer-box-title{font-size:10px;letter-spacing:1.5px;color:var(--text-dim);text-transform:uppercase;margin-bottom:10px;font-weight:700;}
.cheer-list{display:flex;flex-direction:column;gap:7px;margin-bottom:12px;max-height:180px;overflow-y:auto;}
.cheer-item{background:#fff;border:2px solid var(--border);border-radius:12px;padding:10px 13px;}
.cheer-from{font-size:11px;color:var(--accent);font-weight:700;margin-bottom:3px;}
.cheer-text{font-size:13px;color:var(--text);line-height:1.5;}
.cheer-time{font-size:10px;color:var(--text-dim);margin-top:3px;}
.cheer-input-row{display:flex;gap:6px;align-items:center;padding-right:4px;}
.cheer-text-input{flex:1;min-width:0;background:#fff;border:2px solid var(--border);border-radius:10px;padding:10px 12px;color:var(--text);font-size:13px;font-family:var(--font-main);outline:none;transition:all .2s;}
.cheer-text-input:focus{border-color:var(--accent);}
.cheer-send-btn{background:var(--accent);color:#fff;border:none;border-radius:10px;padding:10px 14px;font-size:13px;font-weight:700;font-family:var(--font-main);cursor:pointer;white-space:nowrap;flex-shrink:0;}

/* ADMIN */
.page-pad{padding:24px 20px;}
.section-title{font-family:var(--font-logo);font-size:18px;letter-spacing:2px;margin-bottom:18px;color:var(--accent);}
.admin-hero{text-align:center;padding:28px 0 20px;border-bottom:2px solid var(--border);margin-bottom:28px;}
.admin-hero-title{font-family:var(--font-logo);font-size:22px;letter-spacing:2px;color:var(--accent);margin-bottom:6px;}
.admin-hero-sub{color:var(--text-dim);font-size:13px;}
.create-form{background:var(--surface);border:2px solid var(--border);border-radius:var(--radius);padding:20px;box-shadow:var(--shadow-sm);}
.btn-accent{background:var(--accent);color:#fff;border:none;border-radius:10px;padding:12px 22px;font-size:14px;font-weight:700;font-family:var(--font-main);cursor:pointer;box-shadow:0 4px 12px rgba(25,82,245,.28);}
.admin-input{background:var(--surface2);border:2px solid var(--border);border-radius:10px;padding:10px 12px;color:var(--text);font-size:13px;font-family:var(--font-main);outline:none;box-sizing:border-box;}
.admin-input:focus{border-color:var(--accent);}
.admin-sec-tab{flex:1;padding:12px 0;border:2px solid var(--border);background:#fff;font-size:14px;font-weight:800;color:var(--text-dim);cursor:pointer;border-radius:12px;transition:all .2s;font-family:var(--font-main);}
.admin-sec-tab.active{background:var(--accent);color:#fff;border-color:var(--accent);box-shadow:0 3px 12px rgba(25,82,245,.25);}
.admin-sec-tab:not(.active):hover{border-color:var(--accent);color:var(--accent);background:var(--accent-light);}
.admin-section{display:none;}
.admin-section.active{display:block;}
/* 유저 카드 리스트 */
.admin-user-card{background:#fff;border:2px solid var(--border);border-radius:12px;padding:12px 14px;margin-bottom:8px;cursor:pointer;transition:all .15s;}
.admin-user-card:hover{border-color:var(--accent);background:var(--accent-light);}
.admin-user-card .auc-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;}
.admin-user-card .auc-name{font-size:14px;font-weight:800;color:var(--text);}
.admin-user-card .auc-id{font-size:11px;color:var(--text-dim);}
.admin-user-card .auc-badges{display:flex;gap:4px;flex-wrap:wrap;}
.admin-user-card .auc-badge{font-size:10px;padding:2px 8px;border-radius:100px;font-weight:700;}
.admin-user-card .auc-meta{display:flex;justify-content:space-between;align-items:center;margin-top:8px;padding-top:8px;border-top:1px solid #f1f5f9;font-size:11px;color:var(--text-dim);}
.admin-user-card .auc-pw{font-family:monospace;font-size:11px;color:var(--text-dim);letter-spacing:1px;display:flex;align-items:center;}
.admin-user-card .auc-actions{display:flex;gap:4px;}

.admin-detail{background:var(--surface);border:2px solid var(--border);border-radius:var(--radius);padding:20px;margin-top:16px;}
.admin-detail-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;padding-bottom:14px;border-bottom:2px solid var(--border);}
.admin-detail-name{font-family:var(--font-heading);letter-spacing:-0.02em;font-size:18px;color:var(--text);}
.admin-detail-id{font-size:11px;color:var(--text-dim);margin-top:2px;}
.admin-meta-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:18px;}
.admin-meta-card{background:#fff;border:2px solid var(--border);border-radius:10px;padding:12px 14px;}
.admin-meta-label{font-size:10px;color:var(--text-dim);letter-spacing:1px;text-transform:uppercase;margin-bottom:4px;font-weight:700;}
.admin-meta-val{font-size:12px;color:var(--text);font-weight:500;}
.admin-goal-list{display:flex;flex-direction:column;gap:10px;}
.admin-goal-card{background:#fff;border:2px solid var(--border);border-radius:10px;padding:14px 16px;}
.admin-goal-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;}
.admin-goal-title{font-size:13px;font-weight:700;}
.admin-goal-pct{font-family:var(--font-heading);letter-spacing:-0.02em;font-size:18px;color:var(--accent);}
.admin-goal-bar{height:6px;background:var(--surface2);border-radius:3px;overflow:hidden;margin-bottom:8px;}
.admin-goal-bar-fill{height:100%;background:var(--accent);border-radius:3px;}
.admin-goal-meta{display:flex;flex-wrap:wrap;gap:6px;}
.admin-goal-tag{font-size:10px;background:var(--surface);border:1.5px solid var(--border);border-radius:100px;padding:2px 8px;color:var(--text-dim);font-weight:700;}
.admin-goal-tag.highlight{border-color:var(--accent);color:var(--accent);background:var(--accent-light);}
.admin-empty{text-align:center;color:var(--text-dim);font-size:13px;padding:20px 0;}
.group-card{background:#fff;border:2px solid var(--border);border-radius:var(--radius);padding:16px;margin-bottom:10px;box-shadow:var(--shadow-sm);}
.group-card-hdr{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;}
.group-card-name{font-family:var(--font-heading);letter-spacing:-0.02em;font-size:15px;color:var(--text);}
.group-member-row{display:flex;align-items:center;gap:10px;padding:6px 0;}
.group-member-name{font-size:13px;font-weight:700;flex:1;}
.group-member-id{font-size:11px;color:var(--text-dim);}
.group-remove-btn{background:transparent;border:2px solid var(--border);color:var(--text-dim);border-radius:6px;padding:3px 8px;font-size:11px;cursor:pointer;font-family:var(--font-main);transition:all .2s;}
.group-remove-btn:hover{border-color:var(--danger);color:var(--danger);}
.group-add-select{width:100%;background:#fff;border:2px solid var(--border);border-radius:10px;padding:9px 11px;font-size:13px;font-family:var(--font-main);outline:none;margin-top:10px;}

/* NOTICE */
.notice-banner{display:none;background:linear-gradient(90deg,#1952f5,#6b8fff);color:#fff;padding:10px 18px;cursor:pointer;align-items:center;gap:10px;}
.notice-banner.visible{display:flex;}
.notice-banner-icon{font-size:16px;flex-shrink:0;}
.notice-banner-title{flex:1;font-size:13px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.notice-banner-arrow{font-size:14px;flex-shrink:0;opacity:.8;}
.notice-modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:1000;align-items:flex-start;justify-content:center;}
.notice-modal-overlay.open{display:flex;}
.notice-modal{background:#fff;width:100%;max-width:480px;min-height:100vh;overflow-y:auto;padding:0 0 40px;}
.notice-modal-header{display:flex;align-items:center;justify-content:space-between;padding:18px 20px 14px;border-bottom:2px solid var(--border);position:sticky;top:0;background:#fff;z-index:10;}
.notice-modal-close{background:none;border:none;font-size:22px;cursor:pointer;color:var(--text-dim);padding:4px 8px;border-radius:8px;line-height:1;}
.notice-modal-body{padding:24px 20px;}
.notice-modal-title{font-family:var(--font-heading);letter-spacing:-0.02em;font-size:22px;color:var(--text);margin-bottom:6px;}
.notice-modal-date{font-size:12px;color:var(--text-dim);margin-bottom:20px;}
.notice-modal-img{width:100%;border-radius:14px;margin-bottom:20px;display:block;}
.notice-modal-desc{font-size:15px;color:var(--text);line-height:1.8;white-space:pre-wrap;}
.admin-notice-form{background:#fff;border:2px solid var(--border);border-radius:var(--radius);padding:20px;margin-bottom:12px;box-shadow:var(--shadow-sm);}
.admin-notice-row{display:flex;flex-direction:column;gap:6px;margin-bottom:14px;}
.admin-notice-label{font-size:12px;font-weight:700;color:var(--text-dim);}
.admin-notice-input{background:#fff;border:2px solid var(--border);border-radius:10px;padding:10px 13px;font-size:14px;font-family:var(--font-main);color:var(--text);outline:none;width:100%;box-sizing:border-box;}
.admin-notice-input:focus{border-color:var(--accent);}
.admin-notice-textarea{resize:vertical;min-height:80px;}
.admin-notice-target-row{display:flex;gap:8px;flex-wrap:wrap;}
.admin-notice-target-btn{border:2px solid var(--border);background:#fff;border-radius:8px;padding:7px 14px;font-size:13px;font-family:var(--font-main);font-weight:700;cursor:pointer;color:var(--text-dim);transition:all .2s;}
.admin-notice-target-btn.active{border-color:var(--accent);color:var(--accent);background:var(--accent-light);}
.admin-notice-select{background:#fff;border:2px solid var(--border);border-radius:10px;padding:9px 11px;font-size:13px;font-family:var(--font-main);outline:none;width:100%;margin-top:8px;}
.notice-card{background:#fff;border:2px solid var(--border);border-radius:12px;padding:14px 16px;margin-bottom:8px;display:flex;align-items:center;gap:12px;box-shadow:var(--shadow-sm);}
.notice-card-info{flex:1;min-width:0;}
.notice-card-title{font-size:14px;font-weight:800;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.notice-card-meta{font-size:11px;color:var(--text-dim);margin-top:3px;}
.notice-card-del{background:none;border:2px solid var(--border);border-radius:7px;padding:4px 10px;font-size:12px;color:var(--text-dim);cursor:pointer;font-family:var(--font-main);transition:all .2s;}
.notice-card-del:hover{border-color:var(--danger);color:var(--danger);}

/* TUTORIAL */
#tutorialScreen .mobile-wrap{padding-bottom:40px;}
.tut-topbar{height:52px;background:#fff;border-bottom:2px solid var(--border);display:flex;align-items:center;justify-content:center;position:sticky;top:0;z-index:50;}
.tut-topbar-logo{font-family:var(--font-logo);font-size:18px;color:var(--accent);letter-spacing:2px;}
.tut-progress{padding:16px 20px 0;}
.tut-step-dots{display:flex;gap:6px;justify-content:center;margin-bottom:12px;}
.tut-dot{width:8px;height:8px;border-radius:50%;background:var(--border);transition:background .3s,transform .2s;}
.tut-dot.active{background:var(--accent);transform:scale(1.3);}
.tut-dot.done{background:rgba(25,82,245,.3);}
.tut-track{height:4px;background:var(--surface2);border-radius:2px;overflow:hidden;margin-bottom:20px;}
.tut-fill{height:100%;background:linear-gradient(90deg,var(--accent),#6b8fff);border-radius:2px;transition:width .5s ease;}
.tut-body{padding:0 20px;}
.tut-step{display:none;}
.tut-step.active{display:block;}
.tut-bubble{background:#fff;border:2px solid var(--border);border-radius:18px;padding:20px;margin-bottom:20px;box-shadow:var(--shadow-sm);}
.tut-bubble-tag{font-size:10px;letter-spacing:2px;color:var(--accent);text-transform:uppercase;margin-bottom:8px;font-weight:700;}
.tut-bubble-text{font-size:15px;line-height:1.7;color:var(--text);}
.tut-bubble-text strong{color:var(--accent);}
.tut-preview{background:var(--surface2);border:2px solid var(--border);border-radius:var(--radius);padding:18px;margin-bottom:20px;}
.tut-preview-title{font-size:11px;color:var(--text-dim);letter-spacing:2px;text-transform:uppercase;margin-bottom:12px;font-weight:700;}
.tut-goal-pct{font-family:var(--font-heading);letter-spacing:-0.02em;font-size:22px;color:var(--accent);}
.tut-bar{height:5px;background:var(--border);border-radius:3px;margin-top:8px;overflow:hidden;}
.tut-bar-fill{height:100%;background:var(--accent);border-radius:3px;transition:width .8s ease;}
.tut-cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin:12px 0;}
.tut-cal-day{text-align:center;font-size:10px;color:var(--text-dim);padding:3px 0;font-weight:700;}
.tut-cal-cell{aspect-ratio:1;border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:12px;border:2px solid var(--border);background:#fff;cursor:pointer;transition:all .15s;user-select:none;font-weight:700;}
.tut-cal-cell:active{transform:scale(.9);}
.tut-cal-cell.done{background:var(--accent);border-color:var(--accent);color:#fff;}
.tut-cal-cell.empty{background:transparent;border-color:transparent;cursor:default;}
.tut-cal-cell.target{border-color:var(--accent);animation:pulse-border 1.2s ease-in-out infinite;}
@keyframes pulse-border{0%,100%{box-shadow:0 0 0 0 rgba(25,82,245,.3);}50%{box-shadow:0 0 0 5px rgba(25,82,245,.10);}}
.highlight-box{border:3px solid var(--accent)!important;box-shadow:0 0 0 4px rgba(25,82,245,.15);}
.tut-avatar-wrap{display:flex;flex-direction:column;align-items:center;gap:10px;padding:20px;background:#fff;border:2px solid var(--border);border-radius:var(--radius);margin-bottom:20px;box-shadow:var(--shadow-sm);}
.tut-avatar-art{width:120px;height:120px;background:var(--surface2);border:2px solid var(--border);border-radius:20px;display:flex;align-items:center;justify-content:center;overflow:hidden;}
.tut-avatar-art svg{width:106px;height:106px;}
.tut-avatar-stage{font-family:var(--font-heading);font-size:15px;color:var(--accent);letter-spacing:-0.02em;}
.tut-confirm-btn{width:100%;background:var(--accent);color:#fff;border:none;border-radius:12px;padding:15px;font-size:15px;font-weight:700;font-family:var(--font-main);cursor:pointer;letter-spacing:1px;box-shadow:0 6px 18px rgba(25,82,245,.30);}
.tut-global-bar{background:#fff;border:2px solid var(--border);border-radius:12px;padding:14px 16px;margin-bottom:20px;display:flex;align-items:center;gap:12px;box-shadow:var(--shadow-sm);}
.tut-gb-label{font-size:11px;letter-spacing:2px;color:var(--text-dim);white-space:nowrap;font-weight:700;text-transform:uppercase;}
.tut-gb-track{flex:1;height:6px;background:var(--surface2);border-radius:3px;overflow:hidden;}
.tut-gb-fill{height:100%;background:linear-gradient(90deg,var(--accent),#6b8fff);border-radius:3px;transition:width .8s ease;}
.tut-gb-pct{font-family:var(--font-heading);letter-spacing:-0.02em;font-size:16px;color:var(--accent);min-width:44px;text-align:right;}

/* CONFETTI */
.confetti-container{position:fixed;inset:0;pointer-events:none;z-index:9999;overflow:hidden;}
.confetti-piece{position:absolute;width:10px;height:10px;border-radius:2px;--drift:0px;animation:confetti-fall linear forwards;}
@keyframes confetti-fall{0%{transform:translateY(-20px) translateX(0) rotate(0deg);opacity:1;}50%{opacity:1;}100%{transform:translateY(120vh) translateX(var(--drift)) rotate(1080deg);opacity:0;}}
.toast{position:fixed;bottom:28px;left:50%;transform:translateX(-50%) translateY(100px);padding:14px 32px;border-radius:100px;font-weight:700;font-size:15px;transition:transform .35s cubic-bezier(.34,1.56,.64,1);z-index:9998;pointer-events:none;white-space:nowrap;box-shadow:0 6px 24px rgba(0,0,0,.18);min-width:140px;text-align:center;}
.toast.show{transform:translateX(-50%) translateY(0);}
.toast.toast-done{background:var(--accent);color:#fff;}
.toast.toast-undo{background:#ff5e7d;color:#fff;}
.toast.toast-normal{background:var(--text);color:#fff;}
.week-clear-popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);background:#fff;border:3px solid var(--accent);border-radius:24px;padding:28px 36px;text-align:center;z-index:9999;box-shadow:0 20px 60px rgba(25,82,245,.25);transition:transform .4s cubic-bezier(.34,1.56,.64,1);pointer-events:none;}
.week-clear-popup.show{transform:translate(-50%,-50%) scale(1);}
.week-clear-emoji{font-size:48px;margin-bottom:8px;display:block;}
.week-clear-title{font-family:var(--font-heading);letter-spacing:-0.02em;font-size:20px;color:var(--accent);margin-bottom:4px;}
.week-clear-sub{font-size:13px;color:var(--text-dim);}
@keyframes screen-shake{0%,100%{transform:translateX(0);}10%{transform:translateX(-8px);}20%{transform:translateX(8px);}30%{transform:translateX(-6px);}40%{transform:translateX(6px);}50%{transform:translateX(-4px);}60%{transform:translateX(4px);}}
.shake{animation:screen-shake .7s ease-out;}

/* Share Card */
.share-menu-btn{display:flex;align-items:center;gap:12px;width:100%;padding:14px 16px;background:#f8fafc;border:1.5px solid #e2e8f0;border-radius:12px;cursor:pointer;font-family:var(--font-main);text-align:left;transition:all .15s;}
.share-menu-btn:active{transform:scale(0.97);background:#f0f7ff;border-color:var(--accent);}
.share-export-btn{flex:1;padding:13px;border-radius:12px;font-size:13px;font-weight:700;cursor:pointer;font-family:var(--font-main);border:1.5px solid #e2e8f0;background:#f8fafc;color:var(--text);}
.share-export-btn.primary{background:var(--accent);color:white;border-color:var(--accent);}
.share-export-btn:active{transform:scale(0.97);}

/* Friend tab badge */
.friend-tab-badge{display:inline-block;width:8px;height:8px;background:#ef4444;border-radius:50%;margin-left:4px;vertical-align:top;position:relative;top:-2px;animation:badge-pulse 1.5s ease-in-out infinite;}
@keyframes badge-pulse{0%,100%{opacity:1;}50%{opacity:.4;}}

/* Friend activity card */
.friend-activity-card{background:linear-gradient(135deg,#eff6ff,#dbeafe);border:1.5px solid #bfdbfe;border-radius:14px;padding:14px 16px;margin-bottom:12px;}
.friend-activity-card.idle{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-color:#e2e8f0;}
.friend-activity-card.idle .friend-activity-text{color:#64748b;}
.friend-activity-card.idle .friend-activity-sub{color:#94a3b8;}
.friend-activity-text{font-size:13px;font-weight:700;color:#1e40af;line-height:1.5;}
.friend-activity-sub{font-size:11px;color:#60a5fa;margin-top:4px;font-weight:600;}

/* Update banner */
.update-banner{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#1e293b;color:#fff;padding:10px 16px;border-radius:14px;display:flex;align-items:center;gap:12px;z-index:9999;box-shadow:0 8px 24px rgba(0,0,0,.25);font-size:13px;font-weight:700;animation:slideUp .3s ease-out;}
.update-banner button{background:#3b82f6;color:#fff;border:none;padding:6px 14px;border-radius:8px;font-size:12px;font-weight:700;cursor:pointer;font-family:var(--font-main);}
.update-banner button:active{transform:scale(0.95);}
@keyframes slideUp{from{opacity:0;transform:translateX(-50%) translateY(20px);}to{opacity:1;transform:translateX(-50%) translateY(0);}}

/* Main screen friend activity banner */
.main-friend-banner{margin-top:10px;padding:8px 14px;border-radius:10px;font-size:12px;font-weight:600;cursor:pointer;text-align:center;transition:transform .1s;}
.main-friend-banner:active{transform:scale(0.97);}
.main-friend-banner.active{background:rgba(59,130,246,.12);color:#3b82f6;}
.main-friend-banner.idle{background:rgba(100,116,139,.08);color:#94a3b8;}
.main-banner-row{display:flex;gap:6px;margin-top:10px;align-items:stretch;}
.main-progress-chip,.main-friend-chip{padding:8px 10px;border-radius:10px;font-size:11px;font-weight:700;cursor:pointer;text-align:center;transition:transform .1s;line-height:1.4;}
.main-progress-chip:active,.main-friend-chip:active{transform:scale(0.97);}
.main-progress-chip{background:rgba(34,197,94,.12);color:#16a34a;white-space:nowrap;flex:0 0 auto;}
.main-friend-chip.active{background:rgba(59,130,246,.12);color:#3b82f6;flex:1;min-width:0;}
.main-friend-chip.idle{background:rgba(100,116,139,.08);color:#94a3b8;flex:1;min-width:0;}

/* Cheer bubble badge near avatar */
.cheer-bubble{position:absolute;top:16px;right:16px;background:#fff;border-radius:16px;padding:6px 12px;box-shadow:0 4px 14px rgba(0,0,0,.12);font-size:12px;font-weight:800;color:var(--accent2);z-index:10;cursor:pointer;animation:cheerBounce 0.4s cubic-bezier(.175,.885,.32,1.275) both;display:flex;align-items:center;gap:4px;}
.cheer-bubble::after{content:'';position:absolute;bottom:-6px;right:20px;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #fff;}
@keyframes cheerBounce{0%{transform:scale(0);opacity:0;}100%{transform:scale(1);opacity:1;}}
/* NEW label on cheer cards */
.cheer-new-badge{display:inline-block;background:var(--accent2);color:#fff;font-size:9px;font-weight:800;padding:2px 6px;border-radius:6px;margin-left:6px;vertical-align:middle;letter-spacing:0.5px;}
/* Cheer title badge count */
.cheer-count-badge{display:inline-flex;align-items:center;justify-content:center;background:var(--accent2);color:#fff;font-size:10px;font-weight:800;min-width:18px;height:18px;padding:0 5px;border-radius:9px;margin-left:6px;vertical-align:middle;}

/* Friend banner dark-bg aware */
.avatar-section.dark-bg .main-friend-banner.active,.avatar-section.dark-bg .main-friend-chip.active{background:rgba(96,165,250,.2);color:#93c5fd;}
.avatar-section.dark-bg .main-friend-banner.idle,.avatar-section.dark-bg .main-friend-chip.idle{background:rgba(255,255,255,.1);color:rgba(255,255,255,.7);}
.avatar-section.dark-bg .main-progress-chip{background:rgba(74,222,128,.2);color:#86efac;}

/* Visual haptic feedback */
@keyframes vhap-light-shake{0%,100%{transform:translateX(0);}25%{transform:translateX(-2px);}75%{transform:translateX(2px);}}
@keyframes vhap-heavy-shake{0%,100%{transform:translateX(0) scale(1);}15%{transform:translateX(-3px) scale(1.003);}30%{transform:translateX(3px);}45%{transform:translateX(-2px);}60%{transform:translateX(2px) scale(1);}75%{transform:translateX(-1px);}}
body.vhap-light{animation:vhap-light-shake .15s ease-out;}
body.vhap-heavy{animation:vhap-heavy-shake .25s ease-out;}

/* Progressive disclosure */
.pdisc-step{margin-bottom:20px;}
.pdisc-hidden{display:none;}
.pdisc-reveal{animation:pdiscFadeIn .3s ease-out;}
.pdisc-label{font-size:12px;color:var(--accent);font-weight:700;margin-bottom:8px;}
.pdisc-desc{font-size:12px;color:var(--text-dim);margin-bottom:12px;}
@keyframes pdiscFadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}

/* Wizard slide */
.wiz-wrap{position:relative;overflow:hidden;min-height:260px;transition:min-height .3s ease;}
.wiz-slide{position:absolute;top:0;left:0;width:100%;opacity:0;transform:translateX(60px);transition:all .3s ease;pointer-events:none;visibility:hidden;}
.wiz-slide.active{position:relative;opacity:1;transform:translateX(0);pointer-events:auto;visibility:visible;}
.wiz-slide.exit-left{opacity:0;transform:translateX(-60px);pointer-events:none;visibility:hidden;}
.wiz-summary{display:flex;flex-wrap:wrap;gap:4px;margin-bottom:16px;min-height:24px;}
.wiz-chip{font-size:11px;padding:4px 10px;background:var(--accent-light);color:var(--accent);border-radius:100px;font-weight:700;cursor:pointer;border:1.5px solid transparent;transition:all .15s;max-width:160px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;line-height:1.4;text-align:center;}
.wiz-chip:active{border-color:var(--accent);transform:scale(.95);}
.wiz-nav{display:flex;justify-content:center;align-items:center;margin-top:20px;padding-top:12px;border-top:1px solid var(--border);}
.wiz-nav-back{font-size:14px;font-weight:700;color:var(--text-dim);background:var(--bg-card);border:1.5px solid var(--border);padding:10px 24px;border-radius:12px;cursor:pointer;font-family:var(--font-main);-webkit-tap-highlight-color:transparent;touch-action:manipulation;}
.wiz-nav-back:active{color:var(--accent);border-color:var(--accent);background:var(--accent-light);transform:scale(.96);}
.wiz-nav-step{font-size:11px;color:var(--text-dim);font-weight:700;}
.wiz-dots{display:flex;gap:6px;align-items:center;}
.wiz-dot{width:6px;height:6px;border-radius:50%;background:var(--border);transition:all .2s;padding:4px;background-clip:content-box;cursor:pointer;-webkit-tap-highlight-color:transparent;}
.wiz-dot.active{width:18px;border-radius:3px;background:var(--accent);padding:4px;background-clip:content-box;}
.wiz-dot.done{background:var(--accent);padding:4px;background-clip:content-box;}

/* ===== COOKING SYSTEM ===== */

/* Stage Message */
.stage-msg-wrap { text-align: center; padding: 2px 0; position: relative; z-index: 5; }
.stage-msg {
  display: inline-block;
  font-size: 11px; font-weight: 600; padding: 4px 12px; border-radius: 10px;
  background: rgba(255,255,255,.1); color: rgba(255,255,255,.55); text-align: center;
  line-height: 1.4;
}

/* Cooking FAB */
.cooking-fab {
  position: absolute; top: 10px; right: 16px; z-index: 20;
  width: 48px; height: 48px; border-radius: 50%; border: 2px solid rgba(255,255,255,.25);
  background: rgba(255,255,255,.22); backdrop-filter: blur(6px);
  color: #fff; font-size: 24px; display: flex; align-items: center; justify-content: center;
  box-shadow: 0 2px 10px rgba(0,0,0,.15); cursor: pointer;
  transition: transform .2s, background .2s;
}
.cooking-fab:active { transform: scale(.9); background: rgba(255,255,255,.35); }

/* Cooking Modal Overlay */
.cooking-overlay {
  position: fixed; inset: 0; z-index: 1000; background: rgba(0,0,0,.5);
  display: flex; align-items: center; justify-content: center;
  opacity: 0; pointer-events: none; transition: opacity .3s;
}
.cooking-overlay.open { opacity: 1; pointer-events: auto; }

/* Cooking Modal */
.cooking-modal {
  background: var(--bg, #fff); border-radius: 20px; padding: 24px 20px 20px;
  width: 92%; max-width: 380px; max-height: 85vh; overflow-y: auto;
  position: relative; transform: scale(.85); transition: transform .35s cubic-bezier(.34,1.56,.64,1);
  box-shadow: 0 20px 60px rgba(0,0,0,.25);
}
.cooking-overlay.open .cooking-modal { transform: scale(1); }
.cooking-close {
  position: absolute; top: 12px; right: 14px; background: none; border: none;
  font-size: 18px; color: var(--text-dim); cursor: pointer; padding: 4px 8px;
}
.cooking-title {
  text-align: center; font-size: 18px; font-weight: 800; margin-bottom: 16px;
  font-family: var(--font-heading, var(--font-main));
}

/* Equation */
.cooking-equation { text-align: center; padding: 8px 0 16px; }
.cooking-lv { font-size: 12px; font-weight: 700; color: var(--text-dim); margin-bottom: 12px; }
.cooking-recipe-row { display: flex; align-items: center; justify-content: center; gap: 6px; flex-wrap: wrap; }
.cooking-plus, .cooking-equals { font-size: 18px; font-weight: 800; color: var(--text-dim); }
.cooking-ing-slot {
  display: flex; flex-direction: column; align-items: center; gap: 2px;
  padding: 8px 10px; border-radius: 12px; border: 2px solid var(--border);
  background: var(--surface); min-width: 54px; position: relative; transition: all .3s;
}
.cooking-ing-slot.has { border-color: var(--accent); background: var(--accent-light, #e8f0fe); }
.cooking-ing-slot.missing { opacity: .35; }
.cooking-ing-emoji { font-size: 24px; }
.cooking-ing-name { font-size: 10px; font-weight: 600; color: var(--text-dim); }
.cooking-ing-check {
  position: absolute; top: -4px; right: -4px; width: 16px; height: 16px;
  background: var(--accent); color: #fff; border-radius: 50%; font-size: 10px;
  display: flex; align-items: center; justify-content: center; font-weight: 800;
}
.cooking-result-slot {
  padding: 8px 12px; border-radius: 12px; border: 2px dashed var(--border);
  min-width: 54px; text-align: center; transition: all .3s;
}
.cooking-result-slot.ready { border-color: var(--accent3, #10b981); border-style: solid; background: #ecfdf5; }
.cooking-result-slot.locked { opacity: .4; }
.cooking-result-emoji { font-size: 28px; }

/* Cook Button */
.cooking-btn {
  display: block; width: 100%; margin-top: 16px; padding: 14px; border: none;
  border-radius: 14px; font-size: 15px; font-weight: 800; cursor: pointer;
  font-family: var(--font-main); transition: all .3s;
}
.cooking-btn.active {
  background: linear-gradient(135deg, #ff9a56, #ff6b35); color: #fff;
  box-shadow: 0 4px 16px rgba(255, 107, 53, .35);
  animation: cookBtnPulse 2s infinite;
}
.cooking-btn.disabled { background: var(--surface2, #f1f5f9); color: var(--text-dim); cursor: default; }
@keyframes cookBtnPulse {
  0%, 100% { box-shadow: 0 4px 16px rgba(255,107,53,.35); }
  50% { box-shadow: 0 4px 24px rgba(255,107,53,.55); }
}

/* Inventory */
.cooking-inv-divider {
  font-size: 11px; font-weight: 700; color: var(--text-dim); text-align: center;
  margin: 16px 0 10px; position: relative;
}
.cooking-inv-divider::before, .cooking-inv-divider::after {
  content: ''; position: absolute; top: 50%; width: 30%; height: 1px; background: var(--border);
}
.cooking-inv-divider::before { left: 0; }
.cooking-inv-divider::after { right: 0; }
.cooking-inv { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; }
.cooking-inv-item {
  display: flex; flex-direction: column; align-items: center; gap: 1px;
  min-width: 42px; padding: 6px 4px; border-radius: 10px;
  background: var(--surface); transition: opacity .3s;
}
.cooking-inv-item.empty { opacity: .3; }
.cooking-inv-emoji { font-size: 20px; }
.cooking-inv-qty { font-size: 10px; font-weight: 700; color: var(--text-dim); }
.cooking-inv-empty { width: 100%; text-align: center; padding: 12px; font-size: 12px; color: var(--text-dim); }

/* Completed */
.cooking-complete { font-size: 20px; font-weight: 800; margin: 16px 0 8px; }
.cooking-complete-sub { font-size: 13px; color: var(--text-dim); }

/* Cooking Success Animation */
.cooking-success-anim {
  position: absolute; inset: 0; background: var(--bg, #fff); border-radius: 20px;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  z-index: 10;
}
.cs-gather { display: flex; gap: 8px; transition: all .5s; }
.cs-ing { font-size: 28px; transition: all .5s; }
.cooking-success-anim.phase1 .cs-ing { transform: scale(.5); opacity: .3; }
.cs-result { text-align: center; opacity: 0; transform: scale(.3); transition: all .5s cubic-bezier(.34,1.56,.64,1); }
.cs-result-emoji { font-size: 48px; display: block; }
.cs-result-text { font-size: 16px; font-weight: 800; margin-top: 8px; color: var(--text); }
.cooking-success-anim.phase2 .cs-gather { opacity: 0; position: absolute; }
.cooking-success-anim.phase2 .cs-result { opacity: 1; transform: scale(1); }

/* Milestone Toast */
.milestone-toast {
  position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(.7);
  z-index: 2000; padding: 20px 32px; border-radius: 20px;
  text-align: center; opacity: 0; transition: all .4s cubic-bezier(.34,1.56,.64,1);
  pointer-events: none;
  box-shadow: 0 12px 40px rgba(0,0,0,.2);
}
.milestone-toast.show { opacity: 1; transform: translate(-50%, -50%) scale(1); }
.milestone-toast.ms-25 { background: linear-gradient(135deg, #f0fdf4, #dcfce7); }
.milestone-toast.ms-50 { background: linear-gradient(135deg, #eff6ff, #dbeafe); }
.milestone-toast.ms-75 { background: linear-gradient(135deg, #faf5ff, #e9d5ff); }
.milestone-toast.ms-100 { background: linear-gradient(135deg, #fefce8, #fef08a); }
.ms-icon { font-size: 36px; margin-bottom: 6px; }
.ms-text { font-size: 16px; font-weight: 800; color: #1e293b; }
.ms-sub { font-size: 12px; font-weight: 600; color: #64748b; margin-top: 2px; }

/* Milestone Progress Bar */
.ms-bar-wrap {
  position: relative; margin: 4px -16px 8px; padding: 0 20px; height: 44px;
}
.ms-bar-track {
  position: absolute; left: 20px; right: 20px; top: 50%;
  height: 4px; background: rgba(255,255,255,.18); border-radius: 100px;
  transform: translateY(-50%); z-index: 0; overflow: hidden;
}
.ms-bar-fill {
  height: 100%; border-radius: 100px;
  background: linear-gradient(90deg, #60a5fa, #a78bfa, #f59e0b);
  transition: width .6s ease;
}
.ms-bar-icons {
  position: relative; display: flex; justify-content: space-between;
  align-items: center; width: 100%; z-index: 1;
}
.ms-bar-icon {
  width: 34px; height: 34px; display: flex; align-items: center; justify-content: center;
  border-radius: 50%; background: rgba(30,30,60,.45); border: 2px solid rgba(255,255,255,.15);
  transition: all .3s; flex-shrink: 0;
}
.ms-bar-icon.active {
  background: rgba(255,255,255,.92); border-color: rgba(255,255,255,.5);
  box-shadow: 0 2px 10px rgba(0,0,0,.2);
}
.ms-bar-icon.bounce { animation: msBounce .5s ease; }
.ms-bar-emoji { font-size: 17px; line-height: 1; }
@keyframes msBounce {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.35); }
}
